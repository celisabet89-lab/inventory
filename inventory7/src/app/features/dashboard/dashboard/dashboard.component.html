<div class="space-y-6">
  <!-- Header con saludo -->
  <div class="bg-gradient-to-r from-primary-600 to-indigo-600 rounded-xl shadow-lg p-6 text-white">
    <h1 class="text-3xl font-bold mb-2">
      {{ getGreeting() }}, {{ currentUser()?.profile?.name }}! ðŸ‘‹
    </h1>
    <p class="text-primary-100">
      AquÃ­ estÃ¡ el resumen de tu inventario del dÃ­a de hoy
    </p>
  </div>

  <!-- Cards de estadÃ­sticas -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    @for (stat of stats(); track stat.title) {
      <div class="card hover:scale-105 transition-transform duration-200 cursor-pointer">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-sm font-medium text-gray-600 mb-1">{{ stat.title }}</p>
            <p class="text-3xl font-bold text-gray-900">{{ stat.value }}</p>

            @if (stat.trend) {
              <div class="flex items-center mt-2">
                <i
                  [class]="stat.trendUp ? 'fas fa-arrow-up text-green-600' : 'fas fa-arrow-down text-red-600'"
                  class="text-sm mr-1"
                ></i>
                <span
                  [class]="stat.trendUp ? 'text-green-600' : 'text-red-600'"
                  class="text-sm font-semibold"
                >
                  {{ stat.trend }}
                </span>
                <span class="text-gray-500 text-sm ml-1">vs mes anterior</span>
              </div>
            }
          </div>

          <div [class]="stat.bgColor + ' ' + stat.color + ' w-14 h-14 rounded-full flex items-center justify-center'">
            <i [class]="'fas ' + stat.icon + ' text-2xl'"></i>
          </div>
        </div>
      </div>
    }
  </div>

  <!-- Acciones RÃ¡pidas -->
  <div class="card">
    <h2 class="text-xl font-bold text-gray-800 mb-4">
      <i class="fas fa-bolt text-primary-600 mr-2"></i>
      Acciones RÃ¡pidas
    </h2>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
      @for (action of quickActions(); track action.label) {
        <a
          [routerLink]="action.route"
          [class]="action.color"
          class="text-white p-4 rounded-lg text-center hover:shadow-lg transition-all duration-200 transform hover:-translate-y-1"
        >
          <i [class]="'fas ' + action.icon + ' text-3xl mb-2'"></i>
          <p class="font-semibold text-sm">{{ action.label }}</p>
        </a>
      }
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Actividad Reciente -->
    <div class="card">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold text-gray-800">
          <i class="fas fa-history text-primary-600 mr-2"></i>
          Actividad Reciente
        </h2>
        <a routerLink="/stock/movements" class="text-primary-600 hover:text-primary-700 text-sm font-semibold">
          Ver todo
        </a>
      </div>

      <div class="space-y-4">
        @for (activity of recentActivities(); track activity.title) {
          <div class="flex items-start space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors">
            <div [class]="activity.bgColor + ' ' + activity.color + ' w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0'">
              <i [class]="'fas ' + activity.icon"></i>
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-semibold text-gray-900 mb-1">{{ activity.title }}</p>
              <p class="text-sm text-gray-600 mb-1">{{ activity.description }}</p>
              <div class="flex items-center text-xs text-gray-500">
                <i class="far fa-clock mr-1"></i>
                {{ activity.time }}
                <span class="mx-2">â€¢</span>
                <i class="far fa-user mr-1"></i>
                {{ activity.user }}
              </div>
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Productos con Stock Bajo -->
    <div class="card">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold text-gray-800">
          <i class="fas fa-exclamation-triangle text-red-600 mr-2"></i>
          Stock Bajo
        </h2>
        <a routerLink="/alerts" class="text-primary-600 hover:text-primary-700 text-sm font-semibold">
          Ver alertas
        </a>
      </div>

      <div class="space-y-3">
        @for (item of [
          { name: 'Conectores SC/APC', stock: 15, min: 50, percentage: 30 },
          { name: 'Cable GPON', stock: 800, min: 1000, percentage: 80 },
          { name: 'Cajas de Empalme', stock: 3, min: 5, percentage: 60 },
          { name: 'ONU ZTE F601', stock: 7, min: 10, percentage: 70 }
        ]; track item.name) {
          <div class="p-3 border border-gray-200 rounded-lg hover:border-primary-300 transition-colors">
            <div class="flex items-center justify-between mb-2">
              <p class="font-semibold text-gray-900">{{ item.name }}</p>
              <span
                [class]="item.percentage < 50 ? 'badge-danger' : 'badge-warning'"
                class="badge"
              >
                {{ item.percentage }}%
              </span>
            </div>
            <div class="flex items-center justify-between text-sm text-gray-600">
              <span>Stock: {{ item.stock }}</span>
              <span>MÃ­nimo: {{ item.min }}</span>
            </div>
            <div class="mt-2 h-2 bg-gray-200 rounded-full overflow-hidden">
              <div
                [style.width.%]="item.percentage"
                [class]="item.percentage < 50 ? 'bg-red-500' : 'bg-yellow-500'"
                class="h-full transition-all duration-300"
              ></div>
            </div>
          </div>
        }
      </div>
    </div>
  </div>
</div>
